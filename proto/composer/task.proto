syntax = "proto3";

import "google/protobuf/timestamp.proto";
import "proto/composer/preset.proto";

option go_package = "github.com/timohahaa/transcoder/proto/composer";

package composer;

message Task {
  bytes                     ID         = 1; // taskID for a video-task 
  int32                     Part       = 2; // chunk (subtask) number
  int32                     PartsTotal = 3;
  Video                     Video      = 4;
  Audio                     Audio      = 5;
  string                    Source     = 6; // url
  string                    PushTo     = 7; // url
  google.protobuf.Timestamp CreatedAt  = 8;
  map<string,bool>          Features   = 9;
}

message Audio {
  string      Codec    = 1; 
  int64       BitRate  = 2;
  float       Duration = 3;
  int32       TrackNum = 4;
  AudioPreset Preset   = 5;
}

message Video  {
           string Codec        = 1;
           int64  BitRate      = 2;
           float  Duration     = 3;
           string Quality      = 4;
           string PixFmt       = 5;
           bool   CreatePoster = 6;
  repeated Preset Presets      = 7;
}
